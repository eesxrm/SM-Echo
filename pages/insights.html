<!-- insights.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Insights</title>
  <link rel="stylesheet" href="../styles/style.css" />
</head>
<body>

  <header class="navbar">
    <a href="home.html">
      <img src="../assets/images/LOGO.PNG" alt="Echo Logo" class="logo" />
    </a>
    <div class="top-icons">
      <!-- Hamburger Menu -->
      <div class="dropdown">
        <button class="icon-button" onclick="toggleDropdown()">â˜°</button>
        <div id="dropdownContent" class="dropdown-content">
          <a href="insights.html">ğŸ“Š Insights</a>
          <a href="savings.html">ğŸ’° Savings</a>
          <a href="goals.html">ğŸ¯ Goals</a>
        </div>
      </div>
      <a href="settings.html" class="icon-button">âš™ï¸</a>
      <a href="chat.html" class="icon-button">ğŸ‘¤</a>
      <a href="echolife.html" class="icon-button premium-star">â­</a>
    </div>
  </header>


  <main class="home-container">

    <!-- Page Title / Welcome -->
    <section class="welcome-card">
      <h2>ğŸ“Š Your Financial Insights</h2>
      <p>Hereâ€™s a quick overview of your spending, suggestions, and rewards this month ğŸ’¡</p>
    </section>

    <!-- Monthly Insight -->
    <section class="card">
      <h2>ğŸ“ˆ Monthly Insight</h2>
      <p>Here's your spending breakdown for August:</p>
      <ul class="spending-list">
        <li><span>ğŸ›’ Groceries</span><span>Â£320</span></li>
        <li><span>ğŸš— Transport</span><span>Â£115</span></li>
        <li><span>ğŸ” Dining</span><span>Â£142</span></li>
        <li><span>ğŸ“º Subscriptions</span><span>Â£47</span></li>
        <li><span>ğŸ‰ Entertainment</span><span>Â£85</span></li>
      </ul>
      <button class="cta-button" onclick="openModal('graphModal')">View Detailed Graph</button>
    </section>

    <!-- Smart Suggestions -->
    <section class="card">
      <h2>ğŸ§  Smart Suggestions</h2>
      <p>Based on your spending, Echo recommends:</p>
      <ul>
        <li>ğŸ’¡ Set a cap for Dining at Â£120/month</li>
        <li>ğŸš¶ Walk/bike 2x a week to reduce transport costs</li>
        <li>ğŸ”” Enable alerts for Entertainment spending</li>
      </ul>
      <button class="cta-button" onclick="openModal('budgetModal')">Adjust Budgets</button>
    </section>

    <!-- Rewards and Gamification -->
    <section class="card">
      <h2>ğŸ† Rewards & Gamification</h2>
      <p>You've unlocked:</p>
      <ul>
        <li>ğŸ¯ "Weekly Saver" â€“ Saved 3 weeks in a row</li>
        <li>ğŸ”¥ "No-Spend Day" â€“ 4 times this month</li>
        <li>ğŸ’ª "Consistent Logger" â€“ Tracked spending daily</li>
      </ul>
      <button class="cta-button" onclick="openModal('badgesModal')">View All Badges</button>
    </section>

    <!-- Weekly Email Summary -->
    <section class="card">
      <h2>ğŸ“¬ Weekly Email Summary</h2>
      <p>Echo emails you a digest every Sunday with:</p>
      <ul>
        <li>ğŸ“Š Top spending categories</li>
        <li>ğŸ“‰ Week-over-week insights</li>
        <li>ğŸª„ Tailored saving suggestions</li>
      </ul>
      <button class="cta-button" onclick="openModal('notificationsModal')">Manage Notifications</button>
    </section>

  </main>

  <!-- Modal: Detailed Graph -->
  <div id="graphModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal('graphModal')">&times;</span>
      <h2>ğŸ“Š Detailed Spending Graph</h2>
      <p>Visual breakdown of your spending this month by category:</p>
      <img src="/assets/images/spending.png" alt="Detailed Spending Graph" class="graph-img" />
    </div>
  </div>

  <!-- Modal: Adjust Budget -->
  <div id="budgetModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal('budgetModal')">&times;</span>
      <h2>ğŸ›  Adjust Budgets</h2>
      <p>Use the slider to set a new dining budget.</p>
      <label for="budgetRange">Dining Budget:</label>
      <input type="range" id="budgetRange" min="0" max="500" value="120" />
      <p>New Limit: <strong>Â£<span id="budgetValue">120</span></strong></p>
    </div>
  </div>

  <!-- Modal: View All Badges -->
  <div id="badgesModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal('badgesModal')">&times;</span>
      <h2>ğŸ… All Achievements</h2>
      <p>Youâ€™ve earned the following badges:</p>
      <ul>
        <li>ğŸ’¸ Frugal Master â€“ Spent under Â£500 this month</li>
        <li>ğŸ“† Streak Holder â€“ Logged in daily for 7 days</li>
        <li>ğŸ’° Top Saver â€“ Hit 90% of savings goal</li>
        <li>ğŸš« No Impulse â€“ 5 days no unplanned buys</li>
      </ul>
    </div>
  </div>

  <!-- Modal: Manage Notifications -->
  <div id="notificationsModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal('notificationsModal')">&times;</span>
      <h2>ğŸ”” Notification Settings</h2>
      <label><input type="checkbox" checked> Weekly Email Summary</label><br/>
      <label><input type="checkbox" checked> Daily Tip Notifications</label><br/>
      <label><input type="checkbox"> Monthly Budget Review</label><br/>
      <label><input type="checkbox"> Promotional Offers</label>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    function openModal(id) {
      document.getElementById(id).style.display = 'block';
    }

    function closeModal(id) {
      document.getElementById(id).style.display = 'none';
    }

    const budgetRange = document.getElementById('budgetRange');
    const budgetValue = document.getElementById('budgetValue');
    if (budgetRange && budgetValue) {
      budgetRange.addEventListener('input', () => {
        budgetValue.textContent = budgetRange.value;
      });
    }
  </script>

  <script>
    function toggleDropdown() {
      const dropdown = document.querySelector('.dropdown');
      dropdown.classList.toggle('open');
    }
  
    // Optional: Close dropdown when clicking outside
    window.addEventListener('click', function(e) {
      const dropdown = document.querySelector('.dropdown');
      if (!dropdown.contains(e.target)) {
        dropdown.classList.remove('open');
      }
    });
  </script>

  <script>
    // Apply saved theme on load (works on every page)
    (function applySavedTheme(){
      const saved = localStorage.getItem('echo-theme');
      const prefers = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const useDark = saved ? saved === 'dark' : prefers;
      document.body.classList.toggle('dark-mode', useDark);
  
      // Hint to the browser we support both color schemes
      if (!document.querySelector('meta[name="color-scheme"]')) {
        const meta = document.createElement('meta');
        meta.name = 'color-scheme';
        meta.content = 'light dark';
        document.head.appendChild(meta);
      }
    })();
  
    // Hamburger dropdown shared behavior
    function toggleDropdown() {
      const dropdown = document.querySelector('.dropdown');
      if (dropdown) dropdown.classList.toggle('open');
    }
    window.addEventListener('click', function(e) {
      const dropdown = document.querySelector('.dropdown');
      if (dropdown && !dropdown.contains(e.target)) dropdown.classList.remove('open');
    });
  
    // Optional: react to changes from other tabs/windows
    window.addEventListener('storage', (e) => {
      if (e.key === 'echo-theme') {
        document.body.classList.toggle('dark-mode', e.newValue === 'dark');
      }
    });
  </script>
  

</body>
</html>
